<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cskaoyan.mall.admin.mapper.CskaoyanMallStatMapper">

    <select id="getUserStat" resultType="com.cskaoyan.mall.admin.vo.statvo.UserStatVo">
        select distinct
        (DATE_FORMAT(add_time,'%Y-%m-%d')) as day ,
        count(id) as users
        from cskaoyan_mall_user group by day
    </select>

    <select id="getOrderStat" resultType="com.cskaoyan.mall.admin.vo.statvo.OrderStatVo">
        select distinct
        (DATE_FORMAT(pay_time,'%Y-%m-%d')) as day ,
        count(id) as orders ,
        count(user_id) as customers ,
        sum(order_price) as amount ,
        sum(actual_price) as pcr
        from cskaoyan_mall_order group by day
    </select>

    <select id="getGoodsStat" resultType="com.cskaoyan.mall.admin.vo.statvo.GoodsStatVo">
        select distinct
        (DATE_FORMAT(add_time,'%Y-%m-%d')) as day ,
        count(order_id) as orders ,
        sum(number) as products ,
        sum(number*price) as amount
        from cskaoyan_mall_order_goods group by day
    </select>
</mapper>
